<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empanadas Las Zapata | Pedidos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .product-card { transition: transform 0.2s; }
        .product-card:active { transform: scale(0.96); }
        #subscription-status { display: none; }
        .map-container { border-radius: 1.5rem; overflow: hidden; height: 120px; }
        textarea::placeholder { color: #9ca3af; font-size: 0.85rem; }
    </style>
</head>
<body class="bg-stone-50 font-sans pb-64">

    <header class="bg-yellow-400 p-8 rounded-b-[3rem] shadow-xl text-center border-b-4 border-yellow-500">
        <div class="mx-auto mb-4 drop-shadow-md">
             <img src="empanadas-zapata.PNG" alt="Empanadas Las Zapata" class="mx-auto max-h-24 object-contain">
        </div>
        <p class="text-sm text-yellow-900 font-bold uppercase tracking-widest italic">¬°Calienticos y llenos de sabor!</p>
    </header>

    <main class="p-4 max-w-md mx-auto -mt-6">
        
        <div class="bg-white p-6 rounded-[2rem] shadow-md mb-6 border border-yellow-100">
            <h4 class="font-black text-gray-800 mb-4 uppercase text-[10px] tracking-widest flex items-center gap-2">
                <i class="fas fa-truck text-yellow-600"></i> Datos de Entrega
            </h4>
            <div class="space-y-3 mb-4">
                <input type="text" id="client-name" placeholder="Nombre completo" class="w-full p-3 bg-gray-50 border border-gray-100 rounded-xl focus:outline-none focus:border-yellow-500 text-sm">
                <input type="text" id="client-address" placeholder="Direcci√≥n de entrega" class="w-full p-3 bg-gray-50 border border-gray-100 rounded-xl focus:outline-none focus:border-yellow-500 text-sm">
                <input type="tel" id="client-phone" placeholder="Celular de contacto" class="w-full p-3 bg-gray-50 border border-gray-100 rounded-xl focus:outline-none focus:border-yellow-500 text-sm">
                
                <textarea id="order-notes" rows="2" placeholder="Observaciones (ej: Sin cebolla, traer cambio de $50k, etc.)" class="w-full p-3 bg-yellow-50 border border-yellow-100 rounded-xl focus:outline-none focus:border-yellow-500 text-sm italic"></textarea>
            </div>

            <div class="map-container shadow-inner border border-gray-100">
                <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?q=Pista%20de%20patinaje%20Caucasia&t=&z=15&ie=UTF8&iwloc=&output=embed"></iframe>
            </div>
        </div>

        <div id="product-list" class="space-y-4">
            <div class="product-card bg-white p-4 rounded-3xl shadow-md flex items-center gap-4 border border-orange-100">
                <img src="empanadas.JPG" class="w-20 h-20 rounded-2xl object-cover">
                <div class="flex-1">
                    <h3 class="font-black text-gray-800 text-md">Empanadas</h3>
                    <p class="text-orange-600 font-bold">$1.500</p>
                </div>
                <div class="flex flex-col items-center gap-1 bg-gray-50 p-2 rounded-2xl border border-gray-100">
                    <button onclick="changeQty('p1', 1)" class="w-8 h-8 bg-yellow-400 rounded-lg flex items-center justify-center text-xl shadow-sm">+</button>
                    <span id="p1-qty" class="font-black text-lg w-6 text-center">0</span>
                    <button onclick="changeQty('p1', -1)" class="w-8 h-8 bg-white border border-gray-200 rounded-lg flex items-center justify-center text-xl shadow-sm">-</button>
                </div>
            </div>

            <div class="product-card bg-white p-4 rounded-3xl shadow-md flex items-center gap-4 border border-orange-100">
                <img src="pastelitos-de-pollo.JPG" class="w-20 h-20 rounded-2xl object-cover">
                <div class="flex-1">
                    <h3 class="font-black text-gray-800 text-md">Pastelitos</h3>
                    <p class="text-orange-600 font-bold">$4.000</p>
                </div>
                <div class="flex flex-col items-center gap-1 bg-gray-50 p-2 rounded-2xl border border-gray-100">
                    <button onclick="changeQty('p2', 1)" class="w-8 h-8 bg-yellow-400 rounded-lg flex items-center justify-center text-xl shadow-sm">+</button>
                    <span id="p2-qty" class="font-black text-lg w-6 text-center">0</span>
                    <button onclick="changeQty('p2', -1)" class="w-8 h-8 bg-white border border-gray-200 rounded-lg flex items-center justify-center text-xl shadow-sm">-</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md p-6 shadow-[0_-10px_40px_rgba(0,0,0,0.1)] rounded-t-[3rem] border-t border-gray-100">
        <div class="max-w-md mx-auto">
            <div class="flex justify-between items-center mb-4 px-2">
                <div>
                    <span class="text-gray-400 text-[10px] font-black uppercase tracking-widest block">Total</span>
                    <span id="total-val" class="text-3xl font-black text-gray-900">$0</span>
                </div>
                <div class="text-right">
                    <span class="text-[9px] text-gray-400 font-bold uppercase block">Por</span>
                    <span class="text-sm font-black text-orange-500">Vibras Positivas</span>
                </div>
            </div>
            
            <button onclick="sendOrder()" class="w-full bg-green-500 hover:bg-green-600 text-white font-black py-4 rounded-2xl flex items-center justify-center gap-3 shadow-xl shadow-green-200 active:scale-95 text-lg">
                <i class="fab fa-whatsapp text-2xl"></i> ENVIAR PEDIDO
            </button>
            <p class="text-[9px] text-center mt-3 text-gray-300 font-bold tracking-widest italic">¬© DERECHOS RESERVADOS 2026</p>
        </div>
    </footer>

    <div id="subscription-status" data-expiry="2027-02-11"></div>

    <script>
        const products = {
            p1: { name: "Empanadas Caseras", qty: 0, price: 1500 },
            p2: { name: "Pastelitos de Pollo", qty: 0, price: 4000 }
        };

        function changeQty(id, delta) {
            products[id].qty = Math.max(0, products[id].qty + delta);
            document.getElementById(id + '-qty').innerText = products[id].qty;
            updateTotal();
        }

        function updateTotal() {
            let total = 0;
            for (let key in products) {
                total += products[key].qty * products[key].price;
            }
            document.getElementById('total-val').innerText = '$' + total.toLocaleString('es-CO');
        }

        function sendOrder() {
            const expiryStr = document.getElementById('subscription-status').dataset.expiry;
            if (new Date() > new Date(expiryStr)) {
                alert("Servicio inactivo."); return;
            }

            const name = document.getElementById('client-name').value;
            const address = document.getElementById('client-address').value;
            const phone = document.getElementById('client-phone').value;
            const notes = document.getElementById('order-notes').value;

            if (!name || !address || !phone) {
                alert("Completa tus datos para el env√≠o."); return;
            }

            let itemsText = "";
            let total = 0;
            let hasItems = false;

            for (let key in products) {
                if (products[key].qty > 0) {
                    itemsText += `ü•ü *${products[key].name}*\n   Cant: ${products[key].qty} | Sub: $${(products[key].qty * products[key].price).toLocaleString('es-CO')}\n`;
                    total += products[key].qty * products[key].price;
                    hasItems = true;
                }
            }

            if (!hasItems) {
                alert("Selecciona al menos un producto."); return;
            }

            let message = `üßæ *NUEVO PEDIDO - LAS ZAPATA*\n`;
            message += `üë§ *Cliente:* ${name}\n`;
            message += `üìç *Direcci√≥n:* ${address}\n`;
            message += `üìû *Tel:* ${phone}\n`;
            if(notes) message += `üìù *Notas:* ${notes}\n`;
            message += `----------------------------\n`;
            message += itemsText;
            message += `----------------------------\n`;
            message += `üí∞ *TOTAL A PAGAR: $${total.toLocaleString('es-CO')}*\n\n`;
            message += `‚ú® _App por Vibras Positivas_`;

            window.open(`https://api.whatsapp.com/send?phone=573206942230&text=${encodeURIComponent(message)}`, '_blank');
        }
    </script>
</body>
</html>
